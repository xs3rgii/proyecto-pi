{"version":4,"terraform_version":"1.10.6","serial":14,"lineage":"46c56c96-e112-a4fe-dc96-407e77a4176b","outputs":{"vms":{"value":{"server1":{"ips":["192.168.100.142","No disponible"],"nombre":"server1"},"server2":{"ips":["No disponible"],"nombre":"server2"},"server3":{"ips":["192.168.120.190","No disponible"],"nombre":"server3"}},"type":["object",{"server1":["object",{"ips":["tuple",["string","string"]],"nombre":"string"}],"server2":["object",{"ips":["tuple",["string"]],"nombre":"string"}],"server3":["object",{"ips":["tuple",["string","string"]],"nombre":"string"}]}]}},"resources":[{"module":"module.network[\"red-muy-aislada\"]","mode":"managed","type":"libvirt_network","name":"net","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"schema_version":0,"attributes":{"addresses":[],"autostart":true,"bridge":"virbr32","dhcp":[{"enabled":false}],"dns":[{"enabled":false,"forwarders":[],"hosts":[],"local_only":false,"srvs":[]}],"dnsmasq_options":[],"domain":null,"id":"8276cac4-34bc-4bc3-8199-4431bb5d2fca","mode":"none","mtu":null,"name":"red-muy-aislada","routes":[],"xml":[]},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.network[\"red-nat\"]","mode":"managed","type":"libvirt_network","name":"net","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"schema_version":0,"attributes":{"addresses":["192.168.120.0/24"],"autostart":true,"bridge":"virbr31","dhcp":[{"enabled":true}],"dns":[{"enabled":true,"forwarders":[],"hosts":[],"local_only":false,"srvs":[]}],"dnsmasq_options":[],"domain":"example.com","id":"9186d692-653b-4ca9-91f0-e0d9003c3a49","mode":"nat","mtu":null,"name":"red-nat","routes":[],"xml":[]},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.network[\"red-nat-dhcp\"]","mode":"managed","type":"libvirt_network","name":"net","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"schema_version":0,"attributes":{"addresses":["192.168.100.0/24"],"autostart":true,"bridge":"virbr30","dhcp":[{"enabled":true}],"dns":[{"enabled":true,"forwarders":[],"hosts":[],"local_only":false,"srvs":[]}],"dnsmasq_options":[],"domain":"example.com","id":"245db060-bb16-4697-afe9-2e1b06af6923","mode":"nat","mtu":null,"name":"red-nat-dhcp","routes":[],"xml":[]},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.server[\"server1\"]","mode":"managed","type":"libvirt_cloudinit_disk","name":"cloudinit","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"id":"/var/lib/libvirt/images/server1-cloudinit.iso;64291d3d-9ef5-4173-8fec-5aaba68cf202","meta_data":"","name":"server1-cloudinit.iso","network_config":"network:\n  version: 2\n  ethernets:\n    ens3:\n      dhcp4: true\n    ens4: \n      dhcp4: false\n      addresses: [\"10.0.0.1/24\"]\n      ","pool":"default","user_data":"#cloud-config\n\"chpasswd\":\n  \"expire\": false\n  \"users\":\n  - \"name\": \"debian\"\n    \"password\": \"asdasd\"\n    \"type\": \"text\"\n\"hostname\": \"server1\"\n\"keyboard\":\n  \"layout\": \"es\"\n  \"variant\": \"\"\n\"locale\": \"es_ES.UTF-8\"\n\"package_update\": true\n\"runcmd\":\n- \"for i in {1..15}; do ping -c1 8.8.8.8 \u0026\u0026 break || sleep 2; done\"\n- \"for i in {1..10}; do getent hosts deb.debian.org \u0026\u0026 break || sleep 2; done\"\n- \"DEBIAN_FRONTEND=noninteractive apt-get update -o Acquire::ForceIPv4=true || true\"\n- \"DEBIAN_FRONTEND=noninteractive apt-get install -y -o Dpkg::Options::=\\\"--force-confdef\\\"\n  -o Dpkg::Options::=\\\"--force-confold\\\" kbd || true\"\n- \"loadkeys es || true\"\n- \"command -v setupcon \u003e/dev/null 2\u003e\u00261 \u0026\u0026 setupcon || true\"\n- \"localectl set-locale LANG=es_ES.UTF-8 || true\"\n\"timezone\": \"Europe/Madrid\"\n\"users\":\n- \"groups\": \"users, admin\"\n  \"name\": \"debian\"\n  \"shell\": \"/bin/bash\"\n  \"ssh-authorized-keys\":\n  - \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIETSXcfvbkoDutKTxQA0c7AJiQt/IrrrzwqBjiNSRFF/\n    sroagar2111@sroagar2111\"\n  \"sudo\": \"ALL=(ALL) NOPASSWD:ALL\"\n\"write_files\":\n- \"content\": |\n    Acquire::ForceIPv4 \"true\";\n  \"path\": \"/etc/apt/apt.conf.d/99force-ipv4\"\n  \"permissions\": \"0644\"\n- \"content\": |\n    XKBMODEL=\"pc105\"\n    XKBLAYOUT=\"es\"\n    XKBVARIANT=\"\"\n    XKBOPTIONS=\"\"\n    BACKSPACE=\"guess\"\n  \"owner\": \"root:root\"\n  \"path\": \"/etc/default/keyboard\"\n  \"permissions\": \"0644\"\n"},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.server[\"server1\"]","mode":"managed","type":"libvirt_domain","name":"vm","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"schema_version":0,"attributes":{"arch":"x86_64","autostart":false,"boot_device":[],"cloudinit":"/var/lib/libvirt/images/server1-cloudinit.iso;64291d3d-9ef5-4173-8fec-5aaba68cf202","cmdline":null,"console":[],"coreos_ignition":null,"cpu":[{"mode":"custom"}],"description":"","disk":[{"block_device":"","file":"","scsi":false,"url":"","volume_id":"/var/lib/libvirt/images/server1-linked.qcow2","wwn":""},{"block_device":"","file":"","scsi":false,"url":"","volume_id":"/var/lib/libvirt/images/server1-data.qcow2","wwn":""}],"emulator":"/usr/bin/qemu-system-x86_64","filesystem":[],"firmware":null,"fw_cfg_name":"opt/com.coreos/config","graphics":[],"id":"f85ecccb-ee7f-4ae9-b9a2-db8b9bc29099","initrd":"","kernel":"","machine":"pc","memory":1024,"metadata":null,"name":"server1","network_interface":[{"addresses":["192.168.100.142"],"bridge":"","hostname":"","mac":"52:54:00:F6:6B:32","macvtap":"","network_id":"245db060-bb16-4697-afe9-2e1b06af6923","network_name":"red-nat-dhcp","passthrough":"","vepa":"","wait_for_lease":true},{"addresses":[],"bridge":"","hostname":"","mac":"52:54:00:7A:21:C1","macvtap":"","network_id":"8276cac4-34bc-4bc3-8199-4431bb5d2fca","network_name":"red-muy-aislada","passthrough":"","vepa":"","wait_for_lease":false}],"nvram":[],"qemu_agent":false,"running":true,"timeouts":null,"tpm":[],"type":"kvm","vcpu":2,"video":[],"xml":[]},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9fQ==","dependencies":["module.network.libvirt_network.net","module.server.libvirt_cloudinit_disk.cloudinit","module.server.libvirt_volume.disk_main","module.server.libvirt_volume.extra_disks"]}]},{"module":"module.server[\"server1\"]","mode":"managed","type":"libvirt_volume","name":"disk_main","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"schema_version":0,"attributes":{"base_volume_id":"/var/lib/libvirt/images/debian13-base.qcow2","base_volume_name":null,"base_volume_pool":null,"format":"qcow2","id":"/var/lib/libvirt/images/server1-linked.qcow2","name":"server1-linked.qcow2","pool":"default","size":3221225472,"source":null,"xml":[]},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.server[\"server1\"]","mode":"managed","type":"libvirt_volume","name":"extra_disks","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"index_key":"data","schema_version":0,"attributes":{"base_volume_id":null,"base_volume_name":null,"base_volume_pool":null,"format":"qcow2","id":"/var/lib/libvirt/images/server1-data.qcow2","name":"server1-data.qcow2","pool":"default","size":5368709120,"source":null,"xml":[]},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.server[\"server2\"]","mode":"managed","type":"libvirt_cloudinit_disk","name":"cloudinit","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"id":"/var/lib/libvirt/images/server2-cloudinit.iso;aee58b4b-29f5-421e-b8b0-12fbc28429e5","meta_data":"","name":"server2-cloudinit.iso","network_config":"network:\n  version: 2\n  ethernets:\n    ens3:\n      dhcp4: false\n      addresses: [\"10.0.0.2/24\"]\n      ","pool":"default","user_data":"#cloud-config\n\"chpasswd\":\n  \"expire\": false\n  \"users\":\n  - \"name\": \"ubuntu\"\n    \"password\": \"asdasd\"\n    \"type\": \"text\"\n\"hostname\": \"server2\"\n\"keyboard\":\n  \"layout\": \"es\"\n  \"variant\": \"\"\n\"locale\": \"es_ES.UTF-8\"\n\"package_update\": true\n\"runcmd\":\n- \"for i in {1..15}; do ping -c1 8.8.8.8 \u0026\u0026 break || sleep 2; done\"\n- \"for i in {1..10}; do getent hosts deb.debian.org \u0026\u0026 break || sleep 2; done\"\n- \"DEBIAN_FRONTEND=noninteractive apt-get update -o Acquire::ForceIPv4=true || true\"\n- \"DEBIAN_FRONTEND=noninteractive apt-get install -y -o Dpkg::Options::=\\\"--force-confdef\\\"\n  -o Dpkg::Options::=\\\"--force-confold\\\" kbd || true\"\n- \"loadkeys es || true\"\n- \"command -v setupcon \u003e/dev/null 2\u003e\u00261 \u0026\u0026 setupcon || true\"\n- \"localectl set-locale LANG=es_ES.UTF-8 || true\"\n\"timezone\": \"Europe/Madrid\"\n\"users\":\n- \"groups\": \"users, admin\"\n  \"name\": \"ubuntu\"\n  \"shell\": \"/bin/bash\"\n  \"ssh-authorized-keys\":\n  - \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIETSXcfvbkoDutKTxQA0c7AJiQt/IrrrzwqBjiNSRFF/\n    sroagar2111@sroagar2111\"\n  \"sudo\": \"ALL=(ALL) NOPASSWD:ALL\"\n\"write_files\":\n- \"content\": |\n    Acquire::ForceIPv4 \"true\";\n  \"path\": \"/etc/apt/apt.conf.d/99force-ipv4\"\n  \"permissions\": \"0644\"\n- \"content\": |\n    XKBMODEL=\"pc105\"\n    XKBLAYOUT=\"es\"\n    XKBVARIANT=\"\"\n    XKBOPTIONS=\"\"\n    BACKSPACE=\"guess\"\n  \"owner\": \"root:root\"\n  \"path\": \"/etc/default/keyboard\"\n  \"permissions\": \"0644\"\n"},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.server[\"server2\"]","mode":"managed","type":"libvirt_domain","name":"vm","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"schema_version":0,"attributes":{"arch":"x86_64","autostart":false,"boot_device":[],"cloudinit":"/var/lib/libvirt/images/server2-cloudinit.iso;aee58b4b-29f5-421e-b8b0-12fbc28429e5","cmdline":null,"console":[],"coreos_ignition":null,"cpu":[{"mode":"custom"}],"description":"","disk":[{"block_device":"","file":"","scsi":false,"url":"","volume_id":"/var/lib/libvirt/images/server2-linked.qcow2","wwn":""}],"emulator":"/usr/bin/qemu-system-x86_64","filesystem":[],"firmware":null,"fw_cfg_name":"opt/com.coreos/config","graphics":[],"id":"a8a0723e-a265-471d-84e9-4ecd7a79e267","initrd":"","kernel":"","machine":"pc","memory":1024,"metadata":null,"name":"server2","network_interface":[{"addresses":[],"bridge":"","hostname":"","mac":"52:54:00:D6:82:DB","macvtap":"","network_id":"8276cac4-34bc-4bc3-8199-4431bb5d2fca","network_name":"red-muy-aislada","passthrough":"","vepa":"","wait_for_lease":false}],"nvram":[],"qemu_agent":false,"running":true,"timeouts":null,"tpm":[],"type":"kvm","vcpu":2,"video":[],"xml":[]},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9fQ==","dependencies":["module.network.libvirt_network.net","module.server.libvirt_cloudinit_disk.cloudinit","module.server.libvirt_volume.disk_main","module.server.libvirt_volume.extra_disks"]}]},{"module":"module.server[\"server2\"]","mode":"managed","type":"libvirt_volume","name":"disk_main","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"schema_version":0,"attributes":{"base_volume_id":"/var/lib/libvirt/images/ubuntu2404-base.qcow2","base_volume_name":null,"base_volume_pool":null,"format":"qcow2","id":"/var/lib/libvirt/images/server2-linked.qcow2","name":"server2-linked.qcow2","pool":"default","size":3758096384,"source":null,"xml":[]},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.server[\"server3\"]","mode":"managed","type":"libvirt_cloudinit_disk","name":"cloudinit","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"id":"/var/lib/libvirt/images/server3-cloudinit.iso;6ef2a651-49d2-4d6d-8b59-db9faa45e843","meta_data":"","name":"server3-cloudinit.iso","network_config":"network:\n  version: 2\n  ethernets:\n    ens3:\n      dhcp4: true\n    ens4: \n      dhcp4: false\n      addresses: [\"10.0.0.3/24\"]\n      \n","pool":"default","user_data":"#cloud-config\n\"chpasswd\":\n  \"expire\": false\n  \"users\":\n  - \"name\": \"ubuntu\"\n    \"password\": \"asdasd\"\n    \"type\": \"text\"\n\"hostname\": \"server3\"\n\"keyboard\":\n  \"layout\": \"es\"\n  \"variant\": \"\"\n\"locale\": \"es_ES.UTF-8\"\n\"package_update\": true\n\"runcmd\":\n- \"for i in {1..15}; do ping -c1 8.8.8.8 \u0026\u0026 break || sleep 2; done\"\n- \"for i in {1..10}; do getent hosts deb.debian.org \u0026\u0026 break || sleep 2; done\"\n- \"DEBIAN_FRONTEND=noninteractive apt-get update -o Acquire::ForceIPv4=true || true\"\n- \"DEBIAN_FRONTEND=noninteractive apt-get install -y -o Dpkg::Options::=\\\"--force-confdef\\\"\n  -o Dpkg::Options::=\\\"--force-confold\\\" kbd || true\"\n- \"loadkeys es || true\"\n- \"command -v setupcon \u003e/dev/null 2\u003e\u00261 \u0026\u0026 setupcon || true\"\n- \"localectl set-locale LANG=es_ES.UTF-8 || true\"\n\"timezone\": \"Europe/Madrid\"\n\"users\":\n- \"groups\": \"users, admin\"\n  \"name\": \"ubuntu\"\n  \"shell\": \"/bin/bash\"\n  \"ssh-authorized-keys\":\n  - \"ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIETSXcfvbkoDutKTxQA0c7AJiQt/IrrrzwqBjiNSRFF/\n    sroagar2111@sroagar2111\"\n  \"sudo\": \"ALL=(ALL) NOPASSWD:ALL\"\n\"write_files\":\n- \"content\": |\n    Acquire::ForceIPv4 \"true\";\n  \"path\": \"/etc/apt/apt.conf.d/99force-ipv4\"\n  \"permissions\": \"0644\"\n- \"content\": |\n    XKBMODEL=\"pc105\"\n    XKBLAYOUT=\"es\"\n    XKBVARIANT=\"\"\n    XKBOPTIONS=\"\"\n    BACKSPACE=\"guess\"\n  \"owner\": \"root:root\"\n  \"path\": \"/etc/default/keyboard\"\n  \"permissions\": \"0644\"\n"},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.server[\"server3\"]","mode":"managed","type":"libvirt_domain","name":"vm","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"schema_version":0,"attributes":{"arch":"x86_64","autostart":false,"boot_device":[],"cloudinit":"/var/lib/libvirt/images/server3-cloudinit.iso;6ef2a651-49d2-4d6d-8b59-db9faa45e843","cmdline":null,"console":[],"coreos_ignition":null,"cpu":[{"mode":"custom"}],"description":"","disk":[{"block_device":"","file":"","scsi":false,"url":"","volume_id":"/var/lib/libvirt/images/server3-linked.qcow2","wwn":""},{"block_device":"","file":"","scsi":false,"url":"","volume_id":"/var/lib/libvirt/images/server3-data.qcow2","wwn":""}],"emulator":"/usr/bin/qemu-system-x86_64","filesystem":[],"firmware":null,"fw_cfg_name":"opt/com.coreos/config","graphics":[],"id":"c64d603c-724a-4f89-a65e-3b387c2ce4bc","initrd":"","kernel":"","machine":"pc","memory":1024,"metadata":null,"name":"server3","network_interface":[{"addresses":["192.168.120.190"],"bridge":"","hostname":"","mac":"52:54:00:2E:FE:8A","macvtap":"","network_id":"9186d692-653b-4ca9-91f0-e0d9003c3a49","network_name":"red-nat","passthrough":"","vepa":"","wait_for_lease":true},{"addresses":[],"bridge":"","hostname":"","mac":"52:54:00:06:DD:84","macvtap":"","network_id":"8276cac4-34bc-4bc3-8199-4431bb5d2fca","network_name":"red-muy-aislada","passthrough":"","vepa":"","wait_for_lease":false}],"nvram":[],"qemu_agent":false,"running":true,"timeouts":null,"tpm":[],"type":"kvm","vcpu":2,"video":[],"xml":[]},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9fQ==","dependencies":["module.network.libvirt_network.net","module.server.libvirt_cloudinit_disk.cloudinit","module.server.libvirt_volume.disk_main","module.server.libvirt_volume.extra_disks"]}]},{"module":"module.server[\"server3\"]","mode":"managed","type":"libvirt_volume","name":"disk_main","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"schema_version":0,"attributes":{"base_volume_id":"/var/lib/libvirt/images/ubuntu2404-base.qcow2","base_volume_name":null,"base_volume_pool":null,"format":"qcow2","id":"/var/lib/libvirt/images/server3-linked.qcow2","name":"server3-linked.qcow2","pool":"default","size":3758096384,"source":null,"xml":[]},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"module":"module.server[\"server3\"]","mode":"managed","type":"libvirt_volume","name":"extra_disks","provider":"provider[\"registry.opentofu.org/dmacvicar/libvirt\"]","instances":[{"index_key":"data","schema_version":0,"attributes":{"base_volume_id":null,"base_volume_name":null,"base_volume_pool":null,"format":"qcow2","id":"/var/lib/libvirt/images/server3-data.qcow2","name":"server3-data.qcow2","pool":"default","size":5368709120,"source":null,"xml":[]},"sensitive_attributes":[],"private":"bnVsbA=="}]}],"check_results":null}
